import{c as I,r as C,j as s,u as Y,F as q,H as J}from"./app-BCFUcYIQ.js";import{A as K}from"./app-layout-yPhzw2dD.js";import{d as Q}from"./index-Be7Cb4cj.js";/* empty css            */import"./app-logo-icon-Bj1qFfLf.js";import"./index-d_RSF-17.js";import"./index-ZYqHKkPb.js";function X(e){const t=I.c(9),{className:u}=e,n=C.useId();let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsx("path",{d:"M-3 13 15-5M-5 5l18-18M-1 21 17 3"}),t[0]=r):r=t[0];let l;t[1]!==n?(l=s.jsx("defs",{children:s.jsx("pattern",{id:n,x:"0",y:"0",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:r})}),t[1]=n,t[2]=l):l=t[2];const i=`url(#${n})`;let d;t[3]!==i?(d=s.jsx("rect",{stroke:"none",fill:i,width:"100%",height:"100%"}),t[3]=i,t[4]=d):d=t[4];let x;return t[5]!==u||t[6]!==l||t[7]!==d?(x=s.jsxs("svg",{className:u,fill:"none",children:[l,d]}),t[5]=u,t[6]=l,t[7]=d,t[8]=x):x=t[8],x}const Z=[{title:"Dashboard",href:Q().url}];function ce(){const e=I.c(48),{auth:t,rooms:u,bookings:n}=Y().props,r=u===void 0?[]:u;let l;e[0]!==n?(l=n===void 0?[]:n,e[0]=n,e[1]=l):l=e[1];const i=l,d=[{id:"default-single",value:"single",name:"Single Room",price:1200,capacity:1,description:"Cozy single with shared bathroom."},{id:"default-double",value:"double",name:"Double Room",price:2e3,capacity:2,description:"Shared double room for two."},{id:"default-dorm",value:"dorm",name:"Dormitory",price:600,capacity:6,description:"Bunk-style beds in a shared dorm."}],x=r&&r.length>0?r.map(se):d,[H,c]=C.useState(!1),[m,o]=C.useState(null),[B,P]=C.useState(!1),[S,_]=C.useState(null);let R;e[2]!==c||e[3]!==o?(R=function(D){const W={...D,price:Number(D.price??0),capacity:Number(D.capacity??1),value:D.value??D.id??""};o(W),c(!0)},e[2]=c,e[3]=o,e[4]=R):R=e[4];const M=R,E=K,G=Z;let p;e[5]===Symbol.for("react.memo_cache_sentinel")?(p=s.jsx(J,{title:"Student Dashboard"}),e[5]=p):p=e[5];const O="flex h-full flex-1 flex-col gap-6 rounded-xl p-4",U=t?.user?.name??"Student";let h;e[6]!==U?(h=s.jsxs("h1",{className:"text-2xl font-semibold",children:["Welcome, ",U]}),e[6]=U,e[7]=h):h=e[7];let z;e[8]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Book a room for your stay at De-Rio Hostel"}),e[8]=z):z=e[8];let b;e[9]!==h?(b=s.jsx("header",{className:"flex items-center justify-between gap-4",children:s.jsxs("div",{children:[h,z]})}),e[9]=h,e[10]=b):b=e[10];let f;e[11]!==S?(f=S&&s.jsx("div",{className:"rounded-md border p-3 text-sm "+(S.type==="success"?"border-green-200 bg-green-50 text-green-700":"border-red-200 bg-red-50 text-red-700"),children:S.message}),e[11]=S,e[12]=f):f=e[12];const T="grid gap-4 md:grid-cols-4";let F;e[13]!==M?(F=a=>s.jsxs("div",{className:"rounded-xl border p-4",children:[s.jsx("div",{className:"relative mb-4 h-40 overflow-hidden rounded-md border border-sidebar-border/70 dark:border-sidebar-border",children:a.image?s.jsx("img",{src:`/storage/${a.image}`,alt:a.name,className:"absolute inset-0 size-full object-cover"}):s.jsx(X,{className:"absolute inset-0 size-full stroke-neutral-900/20 dark:stroke-neutral-100/20"})}),s.jsx("h3",{className:"text-lg font-medium",children:a.name}),s.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:a.description}),s.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Capacity: ",a.capacity]}),s.jsxs("div",{className:"text-lg font-semibold",children:["GH₵ ",a.price.toLocaleString()]})]}),s.jsx("div",{children:s.jsx("button",{type:"button",className:"rounded-md bg-primary px-3 py-2 text-sm font-medium text-white hover:bg-primary/90",onClick:()=>M(a),children:"Book"})})]})]},a.id),e[13]=M,e[14]=F):F=e[14];const A=x.map(F);let g;e[15]!==A?(g=s.jsx("section",{className:T,children:A}),e[15]=A,e[16]=g):g=e[16];let L;e[17]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx("h2",{className:"text-lg font-medium",children:"Your Bookings"}),e[17]=L):L=e[17];const V=i.length===0?'No bookings yet. Make your first booking using the "Book" button.':"View your current and past bookings below.";let j;e[18]!==V?(j=s.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:V}),e[18]=V,e[19]=j):j=e[19];let N;e[20]!==i?(N=i.length===0?s.jsx("div",{className:"rounded-md border p-3",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"No bookings yet"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:'Make your first booking using the "Book" button.'})]})})}):i.map(ee),e[20]=i,e[21]=N):N=e[21];let y;e[22]!==N?(y=s.jsx("div",{className:"mt-4 grid gap-3",children:N}),e[22]=N,e[23]=y):y=e[23];let v;e[24]!==j||e[25]!==y?(v=s.jsxs("section",{className:"mt-6 rounded-xl border p-4",children:[L,j,y]}),e[24]=j,e[25]=y,e[26]=v):v=e[26];let k;e[27]!==t?.user?.name||e[28]!==t?.user?.phone||e[29]!==H||e[30]!==m||e[31]!==_||e[32]!==c||e[33]!==o||e[34]!==P||e[35]!==B?(k=H&&m&&s.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/40",children:s.jsxs("div",{className:"mx-4 w-full max-w-2xl rounded-lg bg-popover p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Book ",m.name]}),s.jsx("button",{className:"text-sm text-muted-foreground",onClick:()=>{c(!1),o(null)},children:"Close"})]}),s.jsx("div",{className:"mt-4",children:s.jsxs(q,{method:"post",action:"/bookings",encType:"multipart/form-data",className:"space-y-4",onStart:()=>{P(!0),_(null)},onSuccess:()=>{c(!1),o(null),_({type:"success",message:"Booking submitted successfully."})},onError:()=>{_({type:"error",message:"Submission failed. Please review the form and try again."})},onFinish:()=>{P(!1)},children:[s.jsx("input",{type:"hidden",name:"room_type",value:String(m.value??m.id)}),s.jsxs("div",{className:"grid gap-2 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm",children:"Full name"}),s.jsx("input",{name:"name",defaultValue:String(t?.user?.name??""),className:"mt-1 block w-full rounded-md border bg-transparent px-3 py-2 text-sm shadow-sm outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm",children:"Phone"}),s.jsx("input",{name:"phone",type:"tel",defaultValue:String(t?.user?.phone??""),className:"mt-1 block w-full rounded-md border bg-transparent px-3 py-2 text-sm shadow-sm outline-none"})]})]}),s.jsxs("div",{className:"grid gap-2 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm",children:"Study level"}),s.jsxs("select",{name:"study_level",className:"mt-1 block w-full rounded-md border bg-transparent px-3 py-2 text-sm outline-none",children:[s.jsx("option",{value:"",children:"Select level"}),s.jsx("option",{value:"diploma",children:"Diploma"}),s.jsx("option",{value:"undergraduate",children:"Undergraduate"}),s.jsx("option",{value:"postgraduate",children:"Postgraduate"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm",children:"Guardian name"}),s.jsx("input",{name:"guardian_name",className:"mt-1 block w-full rounded-md border bg-transparent px-3 py-2 text-sm outline-none"})]})]}),s.jsxs("div",{className:"grid gap-2 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm",children:"Guardian phone"}),s.jsx("input",{name:"guardian_phone",type:"tel",className:"mt-1 block w-full rounded-md border bg-transparent px-3 py-2 text-sm outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm",children:"Administration letter (PDF or image)"}),s.jsx("input",{name:"administration_letter",type:"file",accept:".pdf,image/*",className:"mt-1 block w-full text-sm"})]})]}),s.jsx("div",{className:"grid gap-2 md:grid-cols-1",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm",children:"Passport size photo"}),s.jsx("input",{name:"passport_pic",type:"file",accept:"image/*",className:"mt-1 block w-full text-sm"})]})}),s.jsxs("div",{className:"grid gap-2 md:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm",children:"Check-in"}),s.jsx("input",{name:"check_in",type:"date",className:"mt-1 block w-full rounded-md border bg-transparent px-3 py-2 text-sm outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm",children:"Check-out"}),s.jsx("input",{name:"check_out",type:"date",className:"mt-1 block w-full rounded-md border bg-transparent px-3 py-2 text-sm outline-none"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Price: GH₵ ",m.price.toLocaleString()]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",className:"rounded-md border px-3 py-2 text-sm",onClick:()=>{c(!1),o(null)},children:"Cancel"}),s.jsx("button",{type:"submit",className:"rounded-md bg-primary px-3 py-2 text-sm font-medium text-white disabled:opacity-60",disabled:B,children:B?"Submitting…":"Confirm booking"})]})]})]})})]})}),e[27]=t?.user?.name,e[28]=t?.user?.phone,e[29]=H,e[30]=m,e[31]=_,e[32]=c,e[33]=o,e[34]=P,e[35]=B,e[36]=k):k=e[36];let w;e[37]!==b||e[38]!==f||e[39]!==g||e[40]!==v||e[41]!==k?(w=s.jsxs("div",{className:O,children:[b,f,g,v,k]}),e[37]=b,e[38]=f,e[39]=g,e[40]=v,e[41]=k,e[42]=w):w=e[42];let $;return e[43]!==E||e[44]!==w||e[45]!==G||e[46]!==p?($=s.jsxs(E,{breadcrumbs:G,children:[p,w]}),e[43]=E,e[44]=w,e[45]=G,e[46]=p,e[47]=$):$=e[47],$}function ee(e){return s.jsx("div",{className:"rounded-md border p-3",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"font-medium",children:e.room_type}),s.jsx("span",{className:"rounded-full px-2 py-0.5 text-xs font-medium "+(e.status==="approved"?"bg-green-100 text-green-700":e.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"),children:e.status})]}),s.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Check-in: ",new Date(e.check_in).toLocaleDateString()," • Check-out: ",new Date(e.check_out).toLocaleDateString()]}),s.jsxs("div",{className:"mt-1 text-sm text-muted-foreground",children:["Submitted: ",new Date(e.created_at).toLocaleDateString()]})]})})},e.id)}function se(e){return{id:e.slug?`db-slug-${e.slug}`:`db-id-${e.id}`,value:e.slug??e.id,name:e.name,price:Number(e.price??0),capacity:Number(e.capacity??1),description:e.description??"",image:e.image??null}}export{ce as default};
